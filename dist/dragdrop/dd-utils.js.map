{"version":3,"file":"dd-utils.js","sourceRoot":"","sources":["../../src/dragdrop/dd-utils.ts"],"names":[],"mappings":"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","sourcesContent":["// dd-utils.ts 2.0.2 @preserve\r\n\r\n/**\r\n * https://gridstackjs.com/\r\n * (c) 2020 Alain Dumesny, rhlin\r\n * gridstack.js may be freely distributed under the MIT license.\r\n*/\r\nexport class DDUtils {\r\n  static clone(el: HTMLElement): HTMLElement {\r\n    const node = el.cloneNode(true) as HTMLElement;\r\n    node.removeAttribute('id');\r\n    return node;\r\n  }\r\n\r\n  static appendTo(el: HTMLElement, parent: string | HTMLElement | Node) {\r\n    let parentNode: HTMLElement;\r\n    if (typeof parent === 'string') {\r\n      parentNode = document.querySelector(parent as string);\r\n    } else {\r\n      parentNode = parent as HTMLElement;\r\n    }\r\n    if (parentNode) {\r\n      parentNode.append(el);\r\n    }\r\n  }\r\n  static setPositionRelative(el) {\r\n    if (!(/^(?:r|a|f)/).test(window.getComputedStyle(el).position)) {\r\n      el.style.position = \"relative\";\r\n    }\r\n  }\r\n\r\n  static throttle(callback: (...args) => void, delay: number) {\r\n    let isWaiting = false;\r\n\r\n    return (...args) => {\r\n      if (!isWaiting) {\r\n        callback(...args);\r\n        isWaiting = true;\r\n        setTimeout(() => isWaiting = false, delay);\r\n      }\r\n    }\r\n  }\r\n  static addElStyles(el: HTMLElement, styles: { [prop: string]: string | string[] }) {\r\n    if (styles instanceof Object) {\r\n      for (const s in styles) {\r\n        if (styles.hasOwnProperty(s)) {\r\n          if (Array.isArray(styles[s])) {\r\n            // support fallback value\r\n            (styles[s] as string[]).forEach(val => {\r\n              el.style[s] = val;\r\n            });\r\n          } else {\r\n            el.style[s] = styles[s];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  static copyProps(dst, src, props) {\r\n    for (let i = 0; i < props.length; i++) {\r\n      const p = props[i];\r\n      dst[p] = src[p];\r\n    }\r\n  }\r\n\r\n  static initEvent<T>(e: DragEvent|MouseEvent, info: {type: string; target?: EventTarget}) {\r\n    const kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');\r\n    const ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY'.split(',');\r\n    const evt = {type: info.type};\r\n    const obj = {\r\n      button: 0,\r\n      which: 0,\r\n      buttons: 1,\r\n      bubbles: true,\r\n      cancelable: true,\r\n      originEvent: e,\r\n      target: info.target? info.target : e.target\r\n    }\r\n    if (e instanceof DragEvent) {\r\n      Object.assign(obj, {dataTransfer: e.dataTransfer});\r\n    }\r\n    DDUtils.copyProps(evt, e, kbdProps);\r\n    DDUtils.copyProps(evt, e, ptProps);\r\n    DDUtils.copyProps(evt, obj, Object.keys(obj));\r\n    return evt as unknown as T;\r\n  }\r\n}\r\n"]}